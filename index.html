<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FL Studio Wallpaper App</title>
  <link rel="stylesheet" href="style.css">

  <script>
    window.WallpaperApp = {
      registerModule: function(name, module) {
        console.log('Registered module:', name);
        this[name] = module;
      },
      UI: {
        showNotification: function(message, type) {
          const container = document.getElementById('notification-container');
          if (!container) {
            console.log(`Notification container not found. Notification (${type}): ${message}`);
            return;
          }
          container.style.visibility = 'visible';


          const notification = document.createElement('div');
          notification.className = `notification ${type || 'info'}`;
          notification.innerHTML = `<div class="notification-content">${message}</div>
                                    <button class="btn btn-icon notification-close" aria-label="Close notification">&times;</button>`;

          container.appendChild(notification);

          const closeBtn = notification.querySelector('.notification-close');
          if (closeBtn) {
            closeBtn.addEventListener('click', () => {
              notification.classList.remove('show');
              setTimeout(() => {
                notification.remove();
                if (container.children.length === 0) {
                  container.style.visibility = 'hidden';
                }
              }, 300);
            });
          }


          setTimeout(() => {
            notification.classList.add('show');
          }, 10);

          setTimeout(() => {
            if (notification.parentElement) {
              notification.classList.remove('show');
              setTimeout(() => {
                if (notification.parentElement) notification.remove();
                if (container.children.length === 0) {
                  container.style.visibility = 'hidden';
                }
              }, 300);
            }
          }, 3000);
        },
        showTooltip: function() {},
        hideTooltip: function() {},
        showModal: function(id, title, content, footerButtons) {
          const modalContainer = document.getElementById('modal-container');
          if (!modalContainer) return;

          const modal = document.createElement('div');
          modal.className = 'modal acrylic acrylic-dark';
          modal.id = id || `modal-${Date.now()}`;

          modal.innerHTML = `
                <div class="modal-header">
                    <h2 class="modal-title">${title || 'Modal Title'}</h2>
                    <button class="btn btn-icon modal-close" aria-label="Close modal">&times;</button>
                </div>
                <div class="modal-body">
                    ${typeof content === 'string' ? `<p>${content}</p>` : ''}
                </div>
                <div class="modal-footer">
                    </div>
            `;

          if (typeof content !== 'string' && content instanceof HTMLElement) {
            modal.querySelector('.modal-body').appendChild(content);
          }

          const modalFooter = modal.querySelector('.modal-footer');
          if (footerButtons && footerButtons.length > 0) {
            footerButtons.forEach(btnData => {
              const button = document.createElement('button');
              button.textContent = btnData.text;
              button.className = `btn ${btnData.classes || 'btn-secondary'}`;
              if (btnData.onClick) {
                button.addEventListener('click', () => {
                  btnData.onClick();
                  if (btnData.onClick() !== false) {
                    WallpaperApp.UI.hideModal(modal.id);
                  }
                });
              } else {
                button.addEventListener('click', () => WallpaperApp.UI.hideModal(modal.id));
              }
              modalFooter.appendChild(button);
            });
          } else {
            const okButton = document.createElement('button');
            okButton.textContent = 'OK';
            okButton.className = 'btn btn-primary';
            okButton.addEventListener('click', () => WallpaperApp.UI.hideModal(modal.id));
            modalFooter.appendChild(okButton);
          }


          modalContainer.appendChild(modal);
          modalContainer.style.display = 'flex';
          setTimeout(() => modal.classList.add('show'), 10);

          modal.querySelector('.modal-close').addEventListener('click', () => WallpaperApp.UI.hideModal(modal.id));
        },
        hideModal: function(id) {
          const modalContainer = document.getElementById('modal-container');
          const modalToHide = id ? document.getElementById(id) : modalContainer.querySelector('.modal');

          if (modalToHide) {
            modalToHide.classList.remove('show');
            setTimeout(() => {
              if (modalToHide.parentElement) modalToHide.parentElement.removeChild(modalToHide);
              if (modalContainer && modalContainer.children.length === 0) {
                modalContainer.style.display = 'none';
              }
            }, 300);
          }
        }
      },
      Logger: { /* ... bez zmian ... */ }
    };
    window.Utils = { /* ... bez zmian ... */ };
  </script>
</head>
<body style="overflow: hidden;">
<div id="app-container">
  <div id="background-container" class="module-container"></div>
  <div id="media-container" class="module-container"></div>
  <div id="visualizer-container" class="module-container"></div>

  <div class="menu-hover-area">
    <div id="menu-trigger" class="menu-trigger right">
      <div class="trigger-indicator"></div>
    </div>
  </div>

  <div id="main-menu" class="slide-menu right acrylic acrylic-dark"> <div class="menu-header">
    <h1>CLUTCHBOYZ üåê</h1>
    <button class="btn btn-icon menu-close" aria-label="Close menu">&times;</button> </div>
    <div class="menu-content">
      <div class="menu-section" data-section="background">
        <h2 style="display: flex; justify-content: center; align-items: center;">MENU</h2>
        <hr class="divider">
        <div class="category-item" data-action="import-media">MEDIA PLAYER</div>
        <div class="category-item" data-action="transitions">TRANSITIONS</div>
        <div class="category-item" data-action="effects">EFFECTS</div>
        <hr class="divider">
        <div class="category-item" data-action="daw-integration">DAW INTEGRATION</div>
        <div class="category-item" data-action="performance">PERFORMANCE</div>
        <div class="category-item" data-action="extra">EXTRA</div>
        <hr class="divider">
        <div class="category-item" data-action="config-settings">CONFIG SETTINGS</div>
        <div class="category-item" data-action="menu-settings">MENU SETTINGS</div>
        <div class="category-item" data-action="about">ABOUT</div>
        <hr class="divider">
      </div>
    </div>
    <div class="menu-footer">
      <div class="version-info">v0.1.0</div>
    </div>
  </div>

  <div class="submenu-wrapper">
    <div id="import-media-submenu" class="slide-submenu acrylic acrylic-dark"> <div class="menu-header">
      <h1>IMPORT MEDIA</h1>
      <button class="btn btn-icon submenu-close" aria-label="Close submenu">&times;</button> </div>
      <div class="menu-content">
        <div class="menu-section">
          <div class="submenu-item" data-action="import-media">IMPORT MEDIA</div>
        </div>
      </div>
      <div class="menu-footer"></div>
    </div>

    <div id="transitions-submenu" class="slide-submenu acrylic acrylic-dark"> <div class="menu-header">
      <h1>TRANSITIONS</h1>
      <button class="btn btn-icon submenu-close" aria-label="Close submenu">&times;</button>
    </div>
      <div class="menu-content">
        <div class="menu-section">
          <div class="submenu-item open-transitions-l2" data-action="open-transitions-l2">MANAGE TRANSITIONS</div>
        </div>
      </div>
      <div class="menu-footer"></div>
    </div>

    <div id="effects-submenu" class="slide-submenu acrylic acrylic-dark">
      <div class="menu-header"><h1>EFFECTS</h1><button class="btn btn-icon submenu-close" aria-label="Close submenu">&times;</button></div>
      <div class="menu-content"><div class="menu-section">
        <div class="submenu-item open-effects-l2" data-action="open-effects-l2">MANAGE EFFECTS</div>
      </div></div>
      <div class="menu-footer"></div>
    </div>
    <div id="daw-integration-submenu" class="slide-submenu acrylic acrylic-dark">
      <div class="menu-header"><h1>DAW INTEGRATION</h1><button class="btn btn-icon submenu-close" aria-label="Close submenu">&times;</button></div>
      <div class="menu-content"><div class="menu-section">
        <div class="submenu-item" data-action="fl-studio-connection">FL STUDIO</div>
        <div class="submenu-item" data-action="ableton-connection">ABLETON LIVE</div>
        <div class="submenu-item" data-action="logic-connection">LOGIC PRO</div>
        <div class="submenu-item" data-action="pro-tools-connection">PRO TOOLS</div>
        <div class="submenu-item" data-action="custom-daw-connection">CUSTOM DAW</div>
      </div></div><div class="menu-footer"></div>
    </div>
    <div id="performance-submenu" class="slide-submenu acrylic acrylic-dark">
      <div class="menu-header"><h1>PERFORMANCE</h1><button class="btn btn-icon submenu-close" aria-label="Close submenu">&times;</button></div>
      <div class="menu-content"><div class="menu-section">
        <div class="submenu-item" data-action="1">1</div><div class="submenu-item" data-action="2">2</div>
        <div class="submenu-item" data-action="3">3</div><div class="submenu-item" data-action="4">4</div>
        <div class="submenu-item" data-action="5">5</div>
      </div></div><div class="menu-footer"></div>
    </div>
    <div id="extra-submenu" class="slide-submenu acrylic acrylic-dark">
      <div class="menu-header"><h1>EXTRA</h1><button class="btn btn-icon submenu-close" aria-label="Close submenu">&times;</button></div>
      <div class="menu-content"><div class="menu-section">
        <div class="submenu-item" data-action="visualizer-styles">VISUALIZER STYLES</div>
        <div class="submenu-item" data-action="clock-display">CLOCK DISPLAY</div>
        <div class="submenu-item" data-action="spectrum-analyzer">SPECTRUM ANALYZER</div>
        <div class="submenu-item" data-action="weather-widget">WEATHER WIDGET</div>
        <div class="submenu-item" data-action="custom-widgets">CUSTOM WIDGETS</div>
      </div></div><div class="menu-footer"></div>
    </div>
    <div id="config-settings-submenu" class="slide-submenu acrylic acrylic-dark">
      <div class="menu-header"><h1>CONFIG SETTINGS</h1><button class="btn btn-icon submenu-close" aria-label="Close submenu">&times;</button></div>
      <div class="menu-content"><div class="menu-section">
        <div class="submenu-item" data-action="startup-behavior">STARTUP BEHAVIOR</div>
        <div class="submenu-item" data-action="auto-save">AUTO SAVE</div>
        <div class="submenu-item" data-action="file-management">FILE MANAGEMENT</div>
        <div class="submenu-item" data-action="keyboard-shortcuts">KEYBOARD SHORTCUTS</div>
        <div class="submenu-item" data-action="reset-defaults">RESET TO DEFAULTS</div>
      </div></div><div class="menu-footer"></div>
    </div>
    <div id="menu-settings-submenu" class="slide-submenu acrylic acrylic-dark">
      <div class="menu-header"><h1>MENU SETTINGS</h1><button class="btn btn-icon submenu-close" aria-label="Close submenu">&times;</button></div>
      <div class="menu-content"><div class="menu-section">
        <div class="submenu-item" data-action="menu-position">MENU POSITION</div>
        <div class="submenu-item" data-action="menu-opacity">MENU OPACITY</div>
        <div class="submenu-item" data-action="menu-color-theme">COLOR THEME</div>
        <div class="submenu-item" data-action="menu-animations">MENU ANIMATIONS</div>
        <div class="submenu-item" data-action="customize-menu">CUSTOMIZE MENU</div>
      </div></div><div class="menu-footer"></div>
    </div>
    <div id="about-submenu" class="slide-submenu acrylic acrylic-dark">
      <div class="menu-header"><h1>ABOUT</h1><button class="btn btn-icon submenu-close" aria-label="Close submenu">&times;</button></div>
      <div class="menu-content"><div class="menu-section">
        <div class="submenu-item" data-action="app-info">APP INFORMATION</div>
        <div class="submenu-item" data-action="release-notes">RELEASE NOTES</div>
        <div class="submenu-item" data-action="credits">CREDITS</div>
        <div class="submenu-item" data-action="license">LICENSE INFO</div>
        <div class="submenu-item" data-action="contact-support">CONTACT SUPPORT</div>
      </div></div><div class="menu-footer"></div>
    </div>
  </div>

  <!-- Submenu poziomu 2 dla Effects i Transitions -->
  <div class="submenu-wrapper-l2">
    <!-- Effects List Submenu -->
    <div id="effects-list-submenu" class="slide-submenu-l2 acrylic acrylic-dark">
      <div class="menu-header">
        <h1>EFFECTS</h1>
        <button class="btn btn-icon submenu-close-l2" aria-label="Close submenu">&times;</button>
      </div>
      <div class="menu-content">
        <div class="menu-section">
          <div class="submenu-item-l2" data-effect-id="blur">BLUR</div>
          <div class="submenu-item-l2" data-effect-id="glow">GLOW</div>
          <div class="submenu-item-l2" data-effect-id="grayscale">GRAYSCALE</div>
          <div class="submenu-item-l2" data-effect-id="sepia">SEPIA</div>
          <div class="submenu-item-l2" data-effect-id="vignette">VIGNETTE</div>
        </div>
      </div>
      <div class="menu-footer"></div>
    </div>

    <!-- Transitions List Submenu -->
    <div id="transitions-list-submenu" class="slide-submenu-l2 acrylic acrylic-dark">
      <div class="menu-header">
        <h1>TRANSITIONS</h1>
        <button class="btn btn-icon submenu-close-l2" aria-label="Close submenu">&times;</button>
      </div>
      <div class="menu-content">
        <div class="menu-section">
          <div class="submenu-item-l2" data-transition-id="fade">FADE</div>
          <div class="submenu-item-l2" data-transition-id="slide">SLIDE</div>
          <div class="submenu-item-l2" data-transition-id="zoom">ZOOM</div>
          <div class="submenu-item-l2" data-transition-id="dissolve">DISSOLVE</div>
          <div class="submenu-item-l2" data-transition-id="custom">CUSTOM</div>
        </div>
      </div>
      <div class="menu-footer"></div>
    </div>
  </div>

  <!-- Submenu poziomu 3 dla parametr√≥w efekt√≥w i przej≈õƒá -->
  <div class="submenu-wrapper-l3">
    <!-- Effect Parameters Submenu -->
    <div id="effect-params-submenu" class="slide-submenu-l3 acrylic acrylic-dark">
      <div class="menu-header">
        <h1>EFFECT PARAMETERS</h1>
        <button class="btn btn-icon submenu-close-l3" aria-label="Close submenu">&times;</button>
      </div>
      <div class="menu-content">
        <div class="menu-section">
          <!-- Tutaj bƒôdƒÖ dynamicznie tworzone parametry efektu -->
          <div class="submenu-item-l3">PARAMETR 1</div>
          <div class="submenu-item-l3">PARAMETR 2</div>
          <div class="submenu-item-l3">PARAMETR 3</div>
        </div>
      </div>
      <div class="menu-footer"></div>
    </div>

    <!-- Transition Parameters Submenu -->
    <div id="transition-params-submenu" class="slide-submenu-l3 acrylic acrylic-dark">
      <div class="menu-header">
        <h1>TRANSITION PARAMETERS</h1>
        <button class="btn btn-icon submenu-close-l3" aria-label="Close submenu">&times;</button>
      </div>
      <div class="menu-content">
        <div class="menu-section">
          <!-- Tutaj bƒôdƒÖ dynamicznie tworzone parametry przej≈õcia -->
          <div class="submenu-item-l3">PARAMETR 1</div>
          <div class="submenu-item-l3">PARAMETR 2</div>
          <div class="submenu-item-l3">PARAMETR 3</div>
        </div>
      </div>
      <div class="menu-footer"></div>
    </div>
  </div>

  <div id="tooltip-container"></div>
  <div id="notification-container" style="visibility: hidden;"></div>
  <div id="modal-container" style="display: none;"></div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    WallpaperApp.UI.showNotification('FL Studio Wallpaper App ready!', 'success');

    setupBasicMenuFunctionality();

    function setupBasicMenuFunctionality() {
      const menuTrigger = document.getElementById('menu-trigger');
      const mainMenu = document.getElementById('main-menu');
      const menuClose = mainMenu.querySelector('.menu-close');
      const categoryItems = document.querySelectorAll('#main-menu .category-item');
      const submenuCloseButtons = document.querySelectorAll('.submenu-close');

      // Pobierz czas animacji z CSS i przekonwertuj na milisekundy
      let menuAnimationTimeMs = 300; // Domy≈õlna warto≈õƒá
      try {
        // Pobieranie warto≈õci zmiennej CSS ‚Äîmenu-animation-time
        const menuAnimationTimeCss = getComputedStyle(document.documentElement).getPropertyValue('--menu-animation-time').trim();
        if (menuAnimationTimeCss.endsWith('ms')) {
          menuAnimationTimeMs = parseFloat(menuAnimationTimeCss);
        } else if (menuAnimationTimeCss.endsWith('s')) {
          menuAnimationTimeMs = parseFloat(menuAnimationTimeCss) * 1000;
        }
      } catch (e) {
        console.warn("Could not parse --menu-animation-time from CSS. Using default 300ms.", e);
      }


      function closeAllSubmenus(animate = true) {
        const allActiveSubmenus = document.querySelectorAll('.slide-submenu.active');
        const submenuWrapper = document.querySelector('.submenu-wrapper');

        if (submenuWrapper && submenuWrapper.classList.contains('active')) {
          if (animate && allActiveSubmenus.length > 0) {
            allActiveSubmenus.forEach(submenu => {
              submenu.classList.remove('active');
            });
            submenuWrapper.classList.remove('active');
          } else {
            submenuWrapper.classList.remove('active');
            document.querySelectorAll('.slide-submenu').forEach(submenu => {
              submenu.classList.remove('active');
            });
          }
        } else {
          document.querySelectorAll('.slide-submenu').forEach(submenu => {
            submenu.classList.remove('active');
          });
        }

        // Zamknij tak≈ºe submenu poziomu 2 i 3
        closeAllLevel2Submenus();
        closeAllLevel3Submenus();
      }

      menuTrigger.addEventListener('click', () => {
        mainMenu.classList.toggle('active');
        if (!mainMenu.classList.contains('active')) {
          closeAllSubmenus(true);
        }
      });

      if(menuClose) menuClose.addEventListener('click', () => {
        mainMenu.classList.remove('active');
        closeAllSubmenus(true);
      });

      categoryItems.forEach(item => {
        item.addEventListener('click', () => {
          const action = item.getAttribute('data-action');
          const submenuId = `${action}-submenu`;
          const newSubmenu = document.getElementById(submenuId);
          const submenuWrapper = document.querySelector('.submenu-wrapper');
          const currentActiveSubmenu = document.querySelector('.slide-submenu.active');

          if (newSubmenu) {
            categoryItems.forEach(catItem => catItem.classList.remove('selected'));
            item.classList.add('selected');

            if (currentActiveSubmenu && currentActiveSubmenu !== newSubmenu) {
              currentActiveSubmenu.classList.remove('active');
              submenuWrapper.classList.remove('active');

              // Bezpo≈õrednie u≈ºycie menuAnimationTimeMs
              setTimeout(() => {
                newSubmenu.classList.add('active');
                submenuWrapper.classList.add('active');

                // Sprawd≈∫ czy to Effects lub Transitions i pulsacyjnie pod≈õwietl odpowiedni przycisk
                if (action === 'effects') {
                  highlightButton(newSubmenu.querySelector('.open-effects-l2'));
                } else if (action === 'transitions') {
                  highlightButton(newSubmenu.querySelector('.open-transitions-l2'));
                }

              }, menuAnimationTimeMs); // Usuniƒôto redundantnƒÖ zmiennƒÖ transitionDuration

            } else if (!currentActiveSubmenu) {
              newSubmenu.classList.add('active');
              submenuWrapper.classList.add('active');

              // Sprawd≈∫ czy to Effects lub Transitions i pulsacyjnie pod≈õwietl odpowiedni przycisk
              if (action === 'effects') {
                highlightButton(newSubmenu.querySelector('.open-effects-l2'));
              } else if (action === 'transitions') {
                highlightButton(newSubmenu.querySelector('.open-transitions-l2'));
              }
            } else if (currentActiveSubmenu === newSubmenu) {
              closeAllSubmenus(true);
              item.classList.remove('selected');
            }
          } else {
            closeAllSubmenus(true);
            categoryItems.forEach(catItem => catItem.classList.remove('selected'));
          }
        });
      });

      submenuCloseButtons.forEach(button => button.addEventListener('click', () => {
        closeAllSubmenus(true);
        categoryItems.forEach(catItem => catItem.classList.remove('selected'));
      }));

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          const activeModal = document.querySelector('#modal-container .modal.show');
          if (activeModal) {
            WallpaperApp.UI.hideModal(activeModal.id);
          } else {
            const activeL3Submenus = document.querySelectorAll('.slide-submenu-l3.active');
            if (activeL3Submenus.length > 0) {
              closeAllLevel3Submenus();
            } else {
              const activeL2Submenus = document.querySelectorAll('.slide-submenu-l2.active');
              if (activeL2Submenus.length > 0) {
                closeAllLevel2Submenus();
              } else {
                const activeSubmenus = document.querySelectorAll('.slide-submenu.active');
                if (activeSubmenus.length > 0) {
                  closeAllSubmenus(true);
                  categoryItems.forEach(catItem => catItem.classList.remove('selected'));
                } else if (mainMenu.classList.contains('active')) {
                  mainMenu.classList.remove('active');
                }
              }
            }
          }
        }
      });

      // Dodaj obs≈Çugƒô submenu poziom 2 i 3
      setupEnhancedMenuFunctionality();
    }

    function setupEnhancedMenuFunctionality() {
      // Znajd≈∫ przyciski otwierajƒÖce submenu poziom 2
      const openEffectsL2Button = document.querySelector('.open-effects-l2');
      const openTransitionsL2Button = document.querySelector('.open-transitions-l2');

      // Przyciski zamykania submenu poziom 2 i 3
      const submenuL2CloseButtons = document.querySelectorAll('.submenu-close-l2');
      const submenuL3CloseButtons = document.querySelectorAll('.submenu-close-l3');

      // Przyciski efekt√≥w i przej≈õƒá w submenu poziom 2
      const effectButtons = document.querySelectorAll('#effects-list-submenu .submenu-item-l2');
      const transitionButtons = document.querySelectorAll('#transitions-list-submenu .submenu-item-l2');

      // Obs≈Çuga przycisk√≥w otwierajƒÖcych menu poziom 2
      if (openEffectsL2Button) {
        openEffectsL2Button.addEventListener('click', () => {
          openLevel2Submenu('effects-list-submenu');
        });
      }

      if (openTransitionsL2Button) {
        openTransitionsL2Button.addEventListener('click', () => {
          openLevel2Submenu('transitions-list-submenu');
        });
      }

      // Obs≈Çuga zamykania submenu poziom 2
      submenuL2CloseButtons.forEach(button => {
        button.addEventListener('click', closeAllLevel2Submenus);
      });

      // Obs≈Çuga zamykania submenu poziom 3
      submenuL3CloseButtons.forEach(button => {
        button.addEventListener('click', closeAllLevel3Submenus);
      });

      // Obs≈Çuga klikniƒôƒá w efekty w submenu poziom 2
      effectButtons.forEach(button => {
        button.addEventListener('click', () => {
          const effectId = button.getAttribute('data-effect-id');
          openLevel3Submenu('effect-params-submenu', effectId, 'effect');
        });
      });

      // Obs≈Çuga klikniƒôƒá w przej≈õcia w submenu poziom 2
      transitionButtons.forEach(button => {
        button.addEventListener('click', () => {
          const transitionId = button.getAttribute('data-transition-id');
          openLevel3Submenu('transition-params-submenu', transitionId, 'transition');
        });
      });
    }

    // Funkcja otwierajƒÖca submenu poziom 2
    function openLevel2Submenu(submenuId) {
      // Zamknij wcze≈õniej otwarte submenu poziomu 2
      closeAllLevel2Submenus();

      // Otw√≥rz nowe submenu
      const submenu = document.getElementById(submenuId);
      const submenuWrapper = document.querySelector('.submenu-wrapper-l2');

      if (submenu && submenuWrapper) {
        submenuWrapper.style.display = 'block';
        submenu.classList.add('active');

        // Animacja otwarcia
        setTimeout(() => {
          submenuWrapper.classList.add('active');
        }, 10);
      }
    }

    // Funkcja otwierajƒÖca submenu poziom 3
    function openLevel3Submenu(submenuId, itemId, type) {
      // Zamknij wcze≈õniej otwarte submenu poziomu 3
      closeAllLevel3Submenus();

      // Otw√≥rz nowe submenu
      const submenu = document.getElementById(submenuId);
      const submenuWrapper = document.querySelector('.submenu-wrapper-l3');

      if (submenu && submenuWrapper) {
        // Aktualizuj tytu≈Ç submenu
        const title = type === 'effect' ? `${itemId.toUpperCase()} EFFECT` : `${itemId.toUpperCase()} TRANSITION`;
        submenu.querySelector('h1').textContent = title;

        // Ustaw data atrybuty
        if (type === 'effect') {
          submenu.setAttribute('data-effect-id', itemId);
        } else if (type === 'transition') {
          submenu.setAttribute('data-transition-id', itemId);
        }

        submenuWrapper.style.display = 'block';
        submenu.classList.add('active');

        // Animacja otwarcia
        setTimeout(() => {
          submenuWrapper.classList.add('active');
        }, 10);
      }
    }

    // Funkcja zamykajƒÖca wszystkie submenu poziomu 2
    function closeAllLevel2Submenus() {
      const submenuWrapper = document.querySelector('.submenu-wrapper-l2');
      const activeSubmenus = document.querySelectorAll('.slide-submenu-l2.active');

      if (submenuWrapper) {
        submenuWrapper.classList.remove('active');

        // Ukryj aktywne submenu
        activeSubmenus.forEach(submenu => {
          submenu.classList.remove('active');
        });

        // Po animacji ukryj wrapper
        setTimeout(() => {
          submenuWrapper.style.display = 'none';
        }, 300);
      }

      // Zamknij r√≥wnie≈º submenu poziomu 3
      closeAllLevel3Submenus();
    }

    // Funkcja zamykajƒÖca wszystkie submenu poziomu 3
    function closeAllLevel3Submenus() {
      const submenuWrapper = document.querySelector('.submenu-wrapper-l3');
      const activeSubmenus = document.querySelectorAll('.slide-submenu-l3.active');

      if (submenuWrapper) {
        submenuWrapper.classList.remove('active');

        // Ukryj aktywne submenu
        activeSubmenus.forEach(submenu => {
          submenu.classList.remove('active');
        });

        // Po animacji ukryj wrapper
        setTimeout(() => {
          submenuWrapper.style.display = 'none';
        }, 300);
      }
    }

    // Funkcja pod≈õwietlajƒÖca przycisk pulsacyjnie
    function highlightButton(button) {
      if (!button) return;

      button.classList.add('pulse-highlight');

      // Usu≈Ñ klasƒô po animacji
      setTimeout(() => {
        button.classList.remove('pulse-highlight');
      }, 2000);
    }
  });
</script>
<script src="media-importer.js"></script>

</body>
</html>